owl=function(){function Clone(){}function clone(target){if(typeof target=="object"){Clone.prototype=target;return new Clone}else{return target}}function copy(target){if(typeof target!=="object"){return target}else{var value=target.valueOf();if(target!=value){return new target.constructor(value)}else{if(target instanceof target.constructor&&target.constructor!==Object){var c=clone(target.constructor.prototype);for(var property in target){if(target.hasOwnProperty(property)){c[property]=target[property]}}}else{var c={};for(var property in target)c[property]=target[property]}return c}}}var deepCopiers=[];function DeepCopier(config){for(var key in config)this[key]=config[key]}DeepCopier.prototype={constructor:DeepCopier,canCopy:function(source){return false},create:function(source){},populate:function(deepCopyAlgorithm,source,result){}};function DeepCopyAlgorithm(){this.copiedObjects=[];thisPass=this;this.recursiveDeepCopy=function(source){return thisPass.deepCopy(source)};this.depth=0}DeepCopyAlgorithm.prototype={constructor:DeepCopyAlgorithm,maxDepth:256,cacheResult:function(source,result){this.copiedObjects.push([source,result])},getCachedResult:function(source){var copiedObjects=this.copiedObjects;var length=copiedObjects.length;for(var i=0;i<length;i++){if(copiedObjects[i][0]===source){return copiedObjects[i][1]}}return undefined},deepCopy:function(source){if(source===null)return null;if(typeof source!=="object")return source;var cachedResult=this.getCachedResult(source);if(cachedResult)return cachedResult;for(var i=0;i<deepCopiers.length;i++){var deepCopier=deepCopiers[i];if(deepCopier.canCopy(source)){return this.applyDeepCopier(deepCopier,source)}}throw new Error("no DeepCopier is able to copy "+source)},applyDeepCopier:function(deepCopier,source){var result=deepCopier.create(source);this.cacheResult(source,result);this.depth++;if(this.depth>this.maxDepth){throw new Error("Exceeded max recursion depth in deep copy.")}deepCopier.populate(this.recursiveDeepCopy,source,result);this.depth--;return result}};function deepCopy(source,maxDepth){var deepCopyAlgorithm=new DeepCopyAlgorithm;if(maxDepth)deepCopyAlgorithm.maxDepth=maxDepth;return deepCopyAlgorithm.deepCopy(source)}deepCopy.DeepCopier=DeepCopier;deepCopy.deepCopiers=deepCopiers;deepCopy.register=function(deepCopier){if(!(deepCopier instanceof DeepCopier)){deepCopier=new DeepCopier(deepCopier)}deepCopiers.unshift(deepCopier)};deepCopy.register({canCopy:function(source){return true},create:function(source){if(source instanceof source.constructor){return clone(source.constructor.prototype)}else{return{}}},populate:function(deepCopy,source,result){for(var key in source){if(source.hasOwnProperty(key)){result[key]=deepCopy(source[key])}}return result}});deepCopy.register({canCopy:function(source){return source instanceof Array},create:function(source){return new source.constructor},populate:function(deepCopy,source,result){for(var i=0;i<source.length;i++){result.push(deepCopy(source[i]))}return result}});deepCopy.register({canCopy:function(source){return source instanceof Date},create:function(source){return new Date(source)}});function isNode(source){if(window.Node){return source instanceof Node}else{if(source===document)return true;return typeof source.nodeType==="number"&&source.attributes&&source.childNodes&&source.cloneNode}}deepCopy.register({canCopy:function(source){return isNode(source)},create:function(source){if(source===document)return document;return source.cloneNode(false)},populate:function(deepCopy,source,result){if(source===document)return document;if(source.childNodes&&source.childNodes.length){for(var i=0;i<source.childNodes.length;i++){var childCopy=deepCopy(source.childNodes[i]);result.appendChild(childCopy)}}}});return{DeepCopyAlgorithm:DeepCopyAlgorithm,copy:copy,clone:clone,deepCopy:deepCopy}}();